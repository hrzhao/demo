<?xml version="1.0" encoding="utf-8"?>
<frame:EWModule xmlns:fx="http://ns.adobe.com/mxml/2009" 
				xmlns:s="library://ns.adobe.com/flex/spark" 
				xmlns:mx="library://ns.adobe.com/flex/mx" xmlns:frame="frame.*" width="100%" height="100%"
				creationComplete="creationCompleteHandler(event)" xmlns:UI="common.UI.*"
				>
	<fx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			import mx.events.FlexEvent;
			import mx.rpc.AbstractOperation;
			import mx.rpc.events.FaultEvent;
			import mx.rpc.events.ResultEvent;
			
			import utils.MessageBox;
			
			protected function creationCompleteHandler(event:FlexEvent):void
			{
				// TODO Auto-generated method stub
			}
			[Bindable]
			private var appConfigList:ArrayCollection = new ArrayCollection();
			private function getAppConfigList():void{
				var op_getList:AbstractOperation = ro.getOperation("getAppConfigBeanList");
				op_getList.addEventListener(FaultEvent.FAULT,faultHandler);
				op_getList.addEventListener(ResultEvent.RESULT,function(event:ResultEvent):void{
					if(event.result.state == "success"){
						if(event.result.data is ArrayCollection){
							appConfigList = event.result.data;
						}
					}
				});
				op_getList.send();
			}
			protected function faultHandler(event:FaultEvent):void
			{
				// TODO Auto-generated method stub
				MessageBox.show(event.message.toString());
			}
			
			protected function btn_search_clickHandler(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				getAppConfigList()
			}
			
		]]>
	</fx:Script>
	<fx:Declarations>
		<!-- 将非可视元素（例如服务、值对象）放在此处 -->
		<s:RemoteObject id="ro" destination="frameService" />
	</fx:Declarations>
	
	<UI:ExtendedDividedBox top="1" right="0" bottom="0" left="0" direction="horizontal" showButton="true" hideLeftBottom="true">
		<s:BorderContainer  width="80%" height="100%" borderVisible="false" backgroundColor="#bebebe">
			<s:BorderContainer top="5" right="2" left="2" height="28" borderColor="#808080" backgroundColor="#bebebe">
				<s:Label left="27" top="7" text="模块名称"/>
				<s:TextInput id="txt_moduleName" left="90" top="2" width="180"/>
				<s:Button id="btn_search" right="40" top="2" label="查询" click="btn_search_clickHandler(event)"/>
			</s:BorderContainer>
			<mx:AdvancedDataGrid id="dg_appConfig" width="100%" height="100%" top="35" 
								 horizontalScrollPolicy="auto" verticalScrollPolicy="auto"
								 dataProvider="{appConfigList}"
								 sortExpertMode="true">
				<mx:columns>
					<mx:AdvancedDataGridColumn dataField="appId" headerText="应用ID" width="150"/>
					<mx:AdvancedDataGridColumn dataField="name" headerText="名称" width="120"/>
					<mx:AdvancedDataGridColumn dataField="categoryId" headerText="目录ID" width="150"/>
					<mx:AdvancedDataGridColumn dataField="param" headerText="参数" width="120"/>
					<mx:AdvancedDataGridColumn dataField="multiInstance" headerText="多实例" width="60"/>
					<mx:AdvancedDataGridColumn dataField="description" headerText="说明" width="120"/>
					<mx:AdvancedDataGridColumn dataField="path" headerText="路径" width="80"/>
					<mx:AdvancedDataGridColumn dataField="order" headerText="排序" width="40"/>
					<mx:AdvancedDataGridColumn dataField="icon" headerText="图标" width="80"/>
					
				</mx:columns>
			</mx:AdvancedDataGrid>
		</s:BorderContainer>
		<s:BorderContainer backgroundColor="#bebebe" width="20%" height="100%" borderVisible="false">
			
			
		</s:BorderContainer>
		
	</UI:ExtendedDividedBox>
</frame:EWModule>
